## 3. XBEL文档结构

本节介绍XBEL文档的结构。其中包括DTD中定义的每个元素和属性的信息。一些描述包括对用于构造DTD的参数实体的引用;这些在4.1节“参数实体的使用”中有描述。

### 3.1 日期/时间属性值

在这个文档类型中定义的几个属性要求将日期/时间值存储为CDATA。对于这些属性，值必须格式化为ISO 8601:1988包含日期[fS88,Hou93,Kuh98]的值。只要设置时间值的应用程序可以使用该信息，就应该提供时间值。值的格式被限制为配置文件中指定的格式，定义为日期和时间格式[WW98]。需要这种形式的值的属性将在下面描述为具有日期/时间值而不是CDATA值。

### 3.2 顶级信息

本节描述XBEL文档的顶级元素类型。

#### 3.2.1 `<xbel>`元素

`<xbel>`元素定义了存储在xbel实例中的顶级数据结构。它可以包含可选的`<title>`、`<info>`和`<desc>`元素，后面跟着`%nodes.mix`中的任意数量的元素。这类似于`<folder>`元素，但它可能不是嵌套的，并且具有不同的属性。

属性

`<xbel>`元素带有一个version属性，该属性有一个固定的值，指定xbel DTD的版本。其他属性表示与`<folder>`元素的相似性。

version, fixed：指定使用的DTD版本的固定值。

id：ID值，允许链接到该元素;只有`<alias>`元素的ref属性支持相应的IDREF值。

added：日期/时间值，可用于记录何时创建书签集合。

前置

`<xbel>`元素在许多方面与`<folder>`元素类似，但可能不会被折叠。辅助信息，例如一个可选的`<title>`元素，可能以与用户界面中`<folder>`完全不同的方式显示。

### 3.3 常见的元素

本节中描述的元素可能出现在XBEL实例中的不同上下文中，但在每种情况下都共享基本的语义解释。

#### 3.3.1 `<title>`元素

`<title>`元素用于标记与包围的元素相关联的标题。它用于`<xbel>`、`<folder>`和`<bookmark>`元素。这个元素总是可选的，并且只能包含字符数据。

前置

软件提供了书签信息给用户以任何形式应该使用该元素的内容识别资源给用户。可能需要额外的信息来做出明确的识别。
应用程序可以在搜索操作中使用`<title>`的文本。

基本原理

许多互联网资源都用一个简短的标题来描述，通常由书签功能显示。与检索资源来重新加载标题相比，存储标题可以显著提高用户界面的响应性。XBEL的设计者知道，所有浏览器都采用标题存储。


#### 3.3.2 `<desc>`元素

`<desc>`元素用于存储外层元素的可读描述。对于`<folder>`或`<xbel>`元素，这可以用于更彻底地解释存储在集合中的书签的主题以及它们为什么有趣。对于`<bookmark>`，书签指向的资源摘要可能更合适。这个元素总是可选的，只能包含字符数据。

前置

当用户请求包含该描述的文件夹或书签的更多信息时，可以显示此元素的内容。在`<bookmark>`的情况下，可以在通过网络实际发出检索资源的请求之前使用它。
应用程序可以在搜索操作中使用`<desc>`的文本。

基本原理

许多Internet浏览器支持用人类可读的文本简单地注释书签数据。该成员用于支持该数据的交换。

#### 3.3.3 `<info>`元素

`<info>`元素用于存储与立即包围的元素相关的元数据。其预期用途是`<info>`存储一系列`<metadata>`元素，每个元素属于某个应用程序。因此，“应用程序”可以是一个程序，例如一个特定的Internet浏览器，也可以是一个更通用的元数据方案，例如都柏林核心[Dub97]。

`<info>`元素总是可选的。如果存在，它必须包含一个或多个`<metadata>`元素。

前置

如果应用程序不能处理组成的`<metadata>`元素的内容，则期望忽略`<info>`元素。`<info>`元素是应该透明传递还是删除取决于处理应用程序的目的,但应努力保持每当封装元素的信息被保留,即使在一个修改的形式。

基本原理

该元素提供了一种简洁的方法，将特定于应用程序的元数据与书签数据中更普遍支持的结构隔离开来。

#### 3.3.4 `<metadata>`元素

`<metadata>`元素用作一个容器，用于存储与属于单个元数据方案的节点相关的所有辅助信息。`<metadata>`的具体内容高度依赖于所应用的元数据方案;应该使用XML命名空间来标识在元素中使用的显式标记。

`<metadata>`元素总是可选的。注意，必须删除不包含`<metadata>`元素的`<info>`元素。

属性

owner：需要CDATA值指定哪个应用程序拥有元素的内容。此属性的值应该是一个URI，它引用以人类或机器可处理形式的应用程序和内容结构的定义。并不要求URI可以通过网络寻址。我们希望将命名空间属性添加到元素中，以指定为`<metadata>`元素的内容定义的标记。

前置

在`<info>`元素中，每个`<metadata>`元素都要求owner属性有一个唯一的值。修改`<metadata>`元素内容的程序应确保在受影响的`<info>`元素内，应用程序通常修改的所有者值只存在一个`<metadata>`。<用于其他所有者的元数据>元素应该不受影响。
`<metadata>`内容的具体解释高度依赖于所有者和应用程序，不属于本文档的范围。

基本原理

为支持所有者标识，需要`<metadata>`元素。数据的多个所有者共享一个文档类型作为他们的信息，但需要单独处理是完全合理的。资源描述框架提供了一种方法的示例，该方法要求多个应用程序共享一个命名空间[LS98,BGL98]。还需要一些其他形式的所有权标识，以确保处理器可以避免破坏彼此的数据。

### 3.4 数据组织

本节中描述的成员用于对`<bookmark>`节点集合进行组织。`<folder>`用于支持分层组织，`<separator>`用于支持非分层组织。

#### 3.4.1 `<folder>`元素

`<folder>`元素是用于支持分层数据组织的元素。它是唯一允许在自身内部嵌套的元素类型。

该元素可以包含可选的`<title>`、`<info>`和`<desc>`元素。`%nodes.mix`是允许的。

属性

id：ID值，允许链接到该元素;只有`<alias>`元素的ref属性支持相应的IDREF值。

added：日期/时间值，记录将文件夹添加到实例所表示的书签集合的时间。

folded：令牌记录文件夹的内容是否应该显示默认的用户界面，值为“yes”或“no”。

前置

用户界面应该显示`<folder>`元素作为折叠列表，允许用户按需显示或隐藏元素的内容。适当行为以外的用户界面将特定于应用程序的。

基本原理

`<folder>`元素可以用来表示书签集合中的层次关系，就像当前Internet浏览器中的那样。


#### 3.4.2 `<separator>`元素

`<separator>`元素可用于以非层次结构的方式分隔集合中的书签。它可以在`<folder>`或`<xbel>`元素中使用。

前置

这个元素可以通过在交互式用户界面中显示水平或垂直空白来表示，也可以通过打印表示来表示。

基本原理

需要一个简单的分隔符来支持现有互联网浏览器的书签结构。

### 3.5 书签数据

只有一种元素类型用于封装特定于某个书签的信息。没有证明需要替代元素。

#### 3.5.1 `<bookmark>`元素

`<bookmark>`元素用于存储有关特定资源的信息。该元素可以包含可选元素`<title>`， `<info>`和`<desc>`。

属性

`<bookmark>`元素比XBEL中定义的其他元素包含更多的属性。这些属性用于携带大多数主流浏览器在书签中维护的公共信息。

href, required：指定由`<bookmark>`元素描述的资源的URI。

id：ID值，允许链接到该元素;只有`<alias>`元素的ref属性支持相应的IDREF值。

added：日期/时间值，表示`<bookmark>`元素添加到书签集合的时间。

modified：日期/时间值，记录了对`<bookmark>`标识的资源的最后一次已知更改的时间。

visited：日期/时间值，表示用户最后一次“访问”资源的时间。注意，如果软件检查的是自用户上次访问资源以来发生过变化的资源，那么modified的值可能比visited的值更近。这个特性在浏览器中越来越常见。

前置

在用户界面中，`<bookmark>`通常应该由`<title>`元素的内容表示(如果存在的话)。书签的表示应该是`hot `，允许用户遍历引用的资源。关于资源的附加信息，例如在`<desc>`元素中给出的描述，应该可供用户根据需要使用。
在用户界面之外，处理可能过于针对应用程序，因此不适合在这里讨论。

基本原理

使用单个结构化元素类型来表示外部资源简化了处理，同时允许在每个资源上维护丰富的信息集。


### 3.6 内部参考

提供了一个元素来支持对XBEL实例中其他元素的内部引用。

#### 3.6.1 `<alias>`元素

属性
`<alias>`只需要一个属性，用于标识链接引用。

ref, required：IDREF值指`<bookmark>`或`<folder>`元素或文档`<xbel>`元素。

前置

在用户界面中显示书签的软件应该从视觉上区分别名和其他书签，但允许透明地检查参考对象。Netscape Navigator使用斜体显示书签标题。适当的视觉区分可能取决于用户界面的其他方面。
除了用户界面方面的考虑，别名的处理是特定于应用程序的。然而,一些可能有用的指导。当遇到`<alias>`时，应用程序只需要遍历`<alias>`并处理未被处理的referent，否则`<alias>`通常会被忽略。只有当应用程序正在处理书签层次结构的一部分而不是整个树时，这才会成为问题。

基本原理

Netscape Navigator（网景Navigator，现在叫Firefox）和Microsoft Internet Explorer（微软IE）的书签可以包含层次结构中其他节点的“别名”。Navigator只支持对节点添加别名，而ie也支持对文件夹添加别名。
导航器的格式只是将属性aliasid添加到被称为别名的节点，将属性aliasof添加到实际的别名。所有其他每个别名的主要信息是重复的书签条目。XBEL使用一个不同的元素和XML提供的ID/IDREF机制来避免冗余并支持验证。

